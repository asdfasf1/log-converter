<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ ì»¨ë²„í„° Pro - AI í…Œë§ˆ í¸ì§‘ê¸°</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .main-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 0.95rem;
        }
        
        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tab-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            padding: 0 20px;
            gap: 10px;
            overflow-x: auto;
        }
        
        .tab-btn {
            padding: 15px 25px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 0.95rem;
        }
        
        .tab-btn:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }
        
        /* íƒ­ ì»¨í…ì¸  */
        .tab-content {
            display: none;
            padding: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 2ë‹¨ ë ˆì´ì•„ì›ƒ */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }
        
        .panel-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .input-group small {
            color: #888;
            font-size: 0.8rem;
            display: block;
            margin-top: 3px;
        }
        
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 0.85rem;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        /* í…ìŠ¤íŠ¸ í¸ì§‘ íˆ´ë°” */
        .text-toolbar {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .toolbar-btn {
            padding: 8px 14px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.2s;
            color: #555;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .toolbar-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .toolbar-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .toolbar-separator {
            width: 1px;
            height: 24px;
            background: #ddd;
            margin: 0 4px;
        }
        
        .toolbar-label {
            font-size: 0.8rem;
            color: #888;
            font-weight: 600;
            padding: 0 8px;
        }
        
        /* ìŠ¤íƒ€ì¼ í¸ì§‘ê¸° */
        .style-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .style-section-title {
            font-size: 1rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .style-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .style-field {
            display: flex;
            flex-direction: column;
        }
        
        .style-field label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .color-picker-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .color-picker-group input[type="color"] {
            width: 50px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .color-picker-group input[type="text"] {
            flex: 1;
        }
        
        /* ì •ê·œì‹ ê·œì¹™ */
        .regex-rules {
            background: white;
            padding: 15px;
            border-radius: 6px;
        }
        
        .regex-item {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .regex-item input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }
        
        .regex-item button {
            padding: 8px 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .regex-item button:hover {
            background: #c82333;
        }
        
        /* ë¯¸ë¦¬ë³´ê¸° */
        .preview-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            position: sticky;
            top: 20px;
        }
        
        .preview-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .preview-toggle button {
            flex: 1;
            padding: 10px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .preview-toggle button.active {
            background: #667eea;
            color: white;
        }
        
        .preview-container {
            border: 2px dashed #ddd;
            border-radius: 6px;
            padding: 20px;
            min-height: 400px;
            background: white;
            overflow-x: auto;
        }
        
        .preview-container.mobile {
            max-width: 375px;
            margin: 0 auto;
        }
        
        .code-section {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
            position: relative;
            margin-top: 15px;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .copy-btn.copied {
            background: #17a2b8;
        }
        
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 0.9rem;
            color: #333;
        }
        
        .alert-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 0.9rem;
            color: #856404;
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 1200px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .preview-section {
                position: static;
            }
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>ğŸ¨ ë¡œê·¸ ì»¨ë²„í„° Pro</h1>
            <p>HTML í…Œë§ˆ í¸ì§‘ Â· ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° Â· ë§ˆí¬ë‹¤ìš´ ì—ë””í„°</p>
        </div>
        
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="tab-nav">
            <button class="tab-btn active" onclick="switchTab('input')">
                ğŸ“ ê¸°ë³¸ ì…ë ¥
            </button>
            <button class="tab-btn" onclick="switchTab('style')">
                âš™ï¸ ìŠ¤íƒ€ì¼ í¸ì§‘
            </button>
            <button class="tab-btn" onclick="switchTab('regex')">
                ğŸ”§ ì •ê·œì‹ ê·œì¹™
            </button>
            <button class="tab-btn" onclick="switchTab('preview')">
                ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸° & ì½”ë“œ
            </button>
        </div>
        
        <!-- íƒ­ 1: ê¸°ë³¸ ì…ë ¥ -->
        <div id="tab-input" class="tab-content active">
            <div class="two-column">
                <div class="panel">
                    <div class="panel-title">ğŸ“ HTML í…Œë§ˆ & í…ìŠ¤íŠ¸ ì…ë ¥</div>
                    
                    <div class="input-group">
                        <label>
                            HTML í…Œë§ˆ í‹€
                            <small>ë³¸ë¬¸ì´ ë“¤ì–´ê°ˆ ìë¦¬ì— {{CONTENT}}ë¥¼ ë„£ì–´ì£¼ì„¸ìš”</small>
                        </label>
                        <textarea id="themeInput" rows="10" placeholder="<details>...{{CONTENT}}...</details>" oninput="autoGenerate()"></textarea>
                        <div class="button-group">
                            <button class="btn btn-secondary btn-small" onclick="insertContentPlaceholder()">
                                {{CONTENT}} ì‚½ì…
                            </button>
                            <button class="btn btn-secondary btn-small" onclick="loadSampleTheme()">
                                ìƒ˜í”Œ í…Œë§ˆ
                            </button>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>ì†Œì„¤ í…ìŠ¤íŠ¸</label>
                        
                        <!-- ë§ˆí¬ë‹¤ìš´ í¸ì§‘ íˆ´ë°” -->
                        <div class="text-toolbar">
                            <span class="toolbar-label">ì„œì‹:</span>
                            <button class="toolbar-btn" onclick="applyFormat('bold')" title="ë³¼ë“œ (Ctrl+B)">
                                <strong>B</strong> ë³¼ë“œ
                            </button>
                            <button class="toolbar-btn" onclick="applyFormat('italic')" title="ì´íƒ¤ë¦­ (Ctrl+I)">
                                <em>I</em> ì´íƒ¤ë¦­
                            </button>
                            <button class="toolbar-btn" onclick="applyFormat('quote')" title="í°ë”°ì˜´í‘œ">
                                " ëŒ€ì‚¬
                            </button>
                            
                            <div class="toolbar-separator"></div>
                            
                            <span class="toolbar-label">ì‚½ì…:</span>
                            <button class="toolbar-btn" onclick="insertElement('divider')" title="êµ¬ë¶„ì„ ">
                                â” êµ¬ë¶„ì„ 
                            </button>
                            <button class="toolbar-btn" onclick="insertElement('linebreak')" title="ì¤„ë°”ê¿ˆ 2ê°œ">
                                â†µ ë¬¸ë‹¨
                            </button>
                            <button class="toolbar-btn" onclick="insertElement('space')" title="ê³µë°± ë¼ì¸">
                                âµ ì—¬ë°±
                            </button>
                            
                            <div class="toolbar-separator"></div>
                            
                            <button class="toolbar-btn" onclick="clearFormat()" title="ì„ íƒí•œ í…ìŠ¤íŠ¸ì˜ ë§ˆí¬ë‹¤ìš´ ì œê±°">
                                âœ• ì„œì‹ ì œê±°
                            </button>
                        </div>
                        
                        <textarea id="novelInput" rows="14" placeholder="ì†Œì„¤ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.

íŒ: í…ìŠ¤íŠ¸ë¥¼ ë“œë˜ê·¸í•œ ë’¤ ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë§ˆí¬ë‹¤ìš´ì´ ì ìš©ë©ë‹ˆë‹¤!

ì˜ˆì‹œ:
ê·¸ëŠ” ì²œì²œíˆ ê³ ê°œë¥¼ ë“¤ì—ˆë‹¤.

&quot;ì´ê²ƒì´... ë‹¹ë¬¸ì˜ ë¹„ë°€ì¸ê°€.&quot;

*ì¹¼ë‚ ì´ ê³µê¸°ë¥¼ ê°ˆëë‹¤.*

ê·¸ ìˆœê°„, ëª¨ë“  ê²ƒì´ ë©ˆì·„ë‹¤." oninput="autoGenerate()"></textarea>
                        
                        <div class="info-box" style="margin-top: 10px;">
                            <strong>ğŸ’¡ ë‹¨ì¶•í‚¤:</strong> Ctrl+B (ë³¼ë“œ), Ctrl+I (ì´íƒ¤ë¦­)
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <div class="panel-title">ğŸ‘ï¸ ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°</div>
                    <div class="preview-section" style="position: static;">
                        <div class="preview-toggle">
                            <button id="pcPreviewBtn1" class="active" onclick="switchPreview('pc')">
                                ğŸ’» PC
                            </button>
                            <button id="mobilePreviewBtn1" onclick="switchPreview('mobile')">
                                ğŸ“± ëª¨ë°”ì¼
                            </button>
                        </div>
                        
                        <div id="previewContainer1" class="preview-container">
                            <p style="text-align: center; color: #999; padding: 50px 20px;">
                                ë‚´ìš©ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- íƒ­ 2: ìŠ¤íƒ€ì¼ í¸ì§‘ -->
        <div id="tab-style" class="tab-content">
            <div class="alert-box">
                âš¡ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•˜ë©´ ìë™ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸°ì— ë°˜ì˜ë©ë‹ˆë‹¤
            </div>
            
            <div class="style-section">
                <div class="style-section-title">ğŸ¨ ìƒ‰ìƒ ì„¤ì •</div>
                <div class="style-grid">
                    <div class="style-field">
                        <label>ëŒ€ì‚¬ ìƒ‰ìƒ</label>
                        <div class="color-picker-group">
                            <input type="color" id="dialogColor" value="#8d735b" oninput="updateColorInput(this, 'dialogColorText'); autoGenerate()">
                            <input type="text" id="dialogColorText" value="#8d735b" oninput="updateColorPicker(this, 'dialogColor'); autoGenerate()">
                        </div>
                    </div>
                    <div class="style-field">
                        <label>ê°•ì¡° ë°°ê²½ ìƒ‰ìƒ</label>
                        <div class="color-picker-group">
                            <input type="color" id="highlightBg" value="#f0e6d6" oninput="updateColorInput(this, 'highlightBgText'); autoGenerate()">
                            <input type="text" id="highlightBgText" value="#f0e6d6" oninput="updateColorPicker(this, 'highlightBg'); autoGenerate()">
                        </div>
                    </div>
                    <div class="style-field">
                        <label>ë³¸ë¬¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ</label>
                        <div class="color-picker-group">
                            <input type="color" id="textColor" value="#3e2f24" oninput="updateColorInput(this, 'textColorText'); autoGenerate()">
                            <input type="text" id="textColorText" value="#3e2f24" oninput="updateColorPicker(this, 'textColor'); autoGenerate()">
                        </div>
                    </div>
                    <div class="style-field">
                        <label>ë°°ê²½ ìƒ‰ìƒ</label>
                        <div class="color-picker-group">
                            <input type="color" id="bgColor" value="#fcfaf5" oninput="updateColorInput(this, 'bgColorText'); autoGenerate()">
                            <input type="text" id="bgColorText" value="#fcfaf5" oninput="updateColorPicker(this, 'bgColor'); autoGenerate()">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="style-section">
                <div class="style-section-title">ğŸ“ íƒ€ì´í¬ê·¸ë˜í”¼</div>
                <div class="style-grid">
                    <div class="style-field">
                        <label>í°íŠ¸ í¬ê¸°</label>
                        <input type="text" id="fontSize" value="1rem" placeholder="ì˜ˆ: 1rem, 16px" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ì¤„ê°„ê²© (line-height)</label>
                        <input type="text" id="lineHeight" value="2.1" placeholder="ì˜ˆ: 2.1" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ìê°„ (letter-spacing)</label>
                        <input type="text" id="letterSpacing" value="-0.02em" placeholder="ì˜ˆ: -0.02em" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ë¬¸ë‹¨ ì—¬ë°± (margin-bottom)</label>
                        <input type="text" id="paragraphMargin" value="25px" placeholder="ì˜ˆ: 25px" oninput="autoGenerate()">
                    </div>
                </div>
            </div>
            
            <div class="style-section">
                <div class="style-section-title">âœ¨ ê°•ì¡° íš¨ê³¼</div>
                <div class="style-grid">
                    <div class="style-field">
                        <label>ëŒ€ì‚¬ êµµê¸°</label>
                        <select id="dialogWeight" onchange="autoGenerate()">
                            <option value="normal">Normal</option>
                            <option value="500">Medium (500)</option>
                            <option value="600">Semi-Bold (600)</option>
                            <option value="bold" selected>Bold</option>
                            <option value="700">Bold (700)</option>
                            <option value="800">Extra Bold (800)</option>
                        </select>
                    </div>
                    <div class="style-field">
                        <label>ì´íƒ¤ë¦­ íˆ¬ëª…ë„</label>
                        <input type="number" id="italicOpacity" value="0.8" min="0" max="1" step="0.1" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ì´íƒ¤ë¦­ ìƒ‰ìƒ</label>
                        <div class="color-picker-group">
                            <input type="color" id="italicColor" value="#666666" oninput="updateColorInput(this, 'italicColorText'); autoGenerate()">
                            <input type="text" id="italicColorText" value="#666666" oninput="updateColorPicker(this, 'italicColor'); autoGenerate()">
                        </div>
                    </div>
                    <div class="style-field">
                        <label>ë³¼ë“œ ìƒ‰ìƒ</label>
                        <div class="color-picker-group">
                            <input type="color" id="boldColor" value="#2c1810" oninput="updateColorInput(this, 'boldColorText'); autoGenerate()">
                            <input type="text" id="boldColorText" value="#2c1810" oninput="updateColorPicker(this, 'boldColor'); autoGenerate()">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="style-section">
                <div class="style-section-title">ğŸ”² ë ˆì´ì•„ì›ƒ</div>
                <div class="style-grid">
                    <div class="style-field">
                        <label>ë‚´ë¶€ íŒ¨ë”© (ì¢Œìš°)</label>
                        <input type="text" id="paddingX" value="40px" placeholder="ì˜ˆ: 40px" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ë‚´ë¶€ íŒ¨ë”© (ìƒí•˜)</label>
                        <input type="text" id="paddingY" value="50px" placeholder="ì˜ˆ: 50px" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ìµœëŒ€ ë„ˆë¹„</label>
                        <input type="text" id="maxWidth" value="700px" placeholder="ì˜ˆ: 700px" oninput="autoGenerate()">
                    </div>
                    <div class="style-field">
                        <label>ëª¨ì„œë¦¬ ë‘¥ê¸€ê¸°</label>
                        <input type="text" id="borderRadius" value="4px" placeholder="ì˜ˆ: 4px" oninput="autoGenerate()">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- íƒ­ 3: ì •ê·œì‹ ê·œì¹™ -->
        <div id="tab-regex" class="tab-content">
            <div class="panel">
                <div class="panel-title">ğŸ”§ ì •ê·œì‹ ì¹˜í™˜ ê·œì¹™</div>
                
                <div class="info-box">
                    <strong>ê¸°ë³¸ ê·œì¹™ (ìë™ ì ìš©):</strong><br>
                    â€¢ "ëŒ€ì‚¬" â†’ ìƒ‰ìƒ/êµµê¸° ê°•ì¡°<br>
                    â€¢ *ì´íƒ¤ë¦­* â†’ &lt;i&gt; íƒœê·¸<br>
                    â€¢ **ë³¼ë“œ** â†’ &lt;strong&gt; íƒœê·¸<br>
                    â€¢ --- â†’ êµ¬ë¶„ì„ <br>
                    â€¢ ë¹ˆ ì¤„ â†’ ë¬¸ë‹¨ êµ¬ë¶„
                </div>
                
                <div class="regex-rules">
                    <div id="customRegexList">
                        <!-- ì»¤ìŠ¤í…€ ì •ê·œì‹ í•­ëª©ë“¤ì´ ì—¬ê¸° ì¶”ê°€ë¨ -->
                    </div>
                    
                    <button class="btn btn-secondary btn-small" onclick="addRegexRule()">
                        + ì»¤ìŠ¤í…€ ê·œì¹™ ì¶”ê°€
                    </button>
                </div>
                
                <div class="alert-box" style="margin-top: 20px;">
                    <strong>âš ï¸ ì£¼ì˜:</strong> ì •ê·œì‹ íŒ¨í„´ì€ JavaScript ì •ê·œì‹ ë¬¸ë²•ì„ ë”°ë¦…ë‹ˆë‹¤. ì˜ëª»ëœ íŒ¨í„´ì€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>
        
        <!-- íƒ­ 4: ë¯¸ë¦¬ë³´ê¸° & ì½”ë“œ -->
        <div id="tab-preview" class="tab-content">
            <div class="two-column">
                <div class="panel">
                    <div class="panel-title">ğŸ‘ï¸ ìµœì¢… ë¯¸ë¦¬ë³´ê¸°</div>
                    <div class="preview-section" style="position: static;">
                        <div class="preview-toggle">
                            <button id="pcPreviewBtn3" class="active" onclick="switchPreview('pc')">
                                ğŸ’» PC ë·°
                            </button>
                            <button id="mobilePreviewBtn3" onclick="switchPreview('mobile')">
                                ğŸ“± ëª¨ë°”ì¼ ë·°
                            </button>
                        </div>
                        
                        <div id="previewContainer3" class="preview-container">
                            <p style="text-align: center; color: #999; padding: 50px 20px;">
                                ë¯¸ë¦¬ë³´ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <div class="panel-title">ğŸ“„ HTML ì½”ë“œ</div>
                    <div class="code-header">
                        <span style="color: #333; font-weight: 600;">ì™„ì„±ëœ ì½”ë“œ</span>
                        <button class="copy-btn" id="copyBtn" onclick="copyToClipboard()">
                            ğŸ“‹ ë³µì‚¬í•˜ê¸°
                        </button>
                    </div>
                    <div class="code-section" id="resultCode">
                        // ìƒì„±ëœ HTML ì½”ë“œê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPreviewMode = 'pc';
        let customRegexRules = [];
        let autoGenerateTimeout = null;
        
        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.getElementById('novelInput').addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'b') {
                    e.preventDefault();
                    applyFormat('bold');
                } else if (e.key === 'i') {
                    e.preventDefault();
                    applyFormat('italic');
                }
            }
        });
        
        // ë§ˆí¬ë‹¤ìš´ ì„œì‹ ì ìš©
        function applyFormat(type) {
            const textarea = document.getElementById('novelInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            if (selectedText === '') {
                alert('ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            let newText = '';
            
            switch(type) {
                case 'bold':
                    newText = `**${selectedText}**`;
                    break;
                case 'italic':
                    newText = `*${selectedText}*`;
                    break;
                case 'quote':
                    newText = `"${selectedText}"`;
                    break;
            }
            
            const before = textarea.value.substring(0, start);
            const after = textarea.value.substring(end);
            textarea.value = before + newText + after;
            
            // ì»¤ì„œ ìœ„ì¹˜ ì¡°ì •
            const newCursorPos = start + newText.length;
            textarea.setSelectionRange(newCursorPos, newCursorPos);
            textarea.focus();
            
            autoGenerate();
        }
        
        // ìš”ì†Œ ì‚½ì…
        function insertElement(type) {
            const textarea = document.getElementById('novelInput');
            const cursorPos = textarea.selectionStart;
            const before = textarea.value.substring(0, cursorPos);
            const after = textarea.value.substring(cursorPos);
            
            let insertText = '';
            
            switch(type) {
                case 'divider':
                    insertText = '\n---\n';
                    break;
                case 'linebreak':
                    insertText = '\n\n';
                    break;
                case 'space':
                    insertText = '\n\n\n';
                    break;
            }
            
            textarea.value = before + insertText + after;
            
            // ì»¤ì„œ ìœ„ì¹˜ ì¡°ì •
            const newCursorPos = cursorPos + insertText.length;
            textarea.setSelectionRange(newCursorPos, newCursorPos);
            textarea.focus();
            
            autoGenerate();
        }
        
        // ì„œì‹ ì œê±°
        function clearFormat() {
            const textarea = document.getElementById('novelInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            let selectedText = textarea.value.substring(start, end);
            
            if (selectedText === '') {
                alert('ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ëª¨ë“  ë§ˆí¬ë‹¤ìš´ ì œê±°
            selectedText = selectedText
                .replace(/\*\*([^\*]+)\*\*/g, '$1')  // ë³¼ë“œ ì œê±°
                .replace(/\*([^\*]+)\*/g, '$1')      // ì´íƒ¤ë¦­ ì œê±°
                .replace(/"([^"]*)"/g, '$1');        // í°ë”°ì˜´í‘œ ì œê±°
            
            const before = textarea.value.substring(0, start);
            const after = textarea.value.substring(end);
            textarea.value = before + selectedText + after;
            
            // ì»¤ì„œ ìœ„ì¹˜ ì¡°ì •
            const newCursorPos = start + selectedText.length;
            textarea.setSelectionRange(newCursorPos, newCursorPos);
            textarea.focus();
            
            autoGenerate();
        }
        
        // ìë™ ìƒì„± (ë””ë°”ìš´ì‹±)
        function autoGenerate() {
            clearTimeout(autoGenerateTimeout);
            autoGenerateTimeout = setTimeout(() => {
                generateLog();
            }, 500);
        }
        
        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¹€
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');
        }
        
        // ìƒ˜í”Œ í…Œë§ˆ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSampleTheme() {
            const sampleTheme = `<details style="width: 100%; max-width: 700px; border: 1px solid #8d735b; border-radius: 4px; overflow: hidden; font-family: 'Noto Serif KR', serif; margin: 0 auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer;">
  <summary style="background: #4a3427; padding: 25px; color: #e9dcc6; list-style: none; outline: none; text-align: center; border-bottom: 2px solid #8d735b;">
    <div style="font-size: 0.7rem; letter-spacing: 3px; opacity: 0.6; margin-bottom: 5px;">å”é–€ ç§˜éŒ„ (ë‹¹ë¬¸ë¹„ë¡)</div>
    <span style="font-size: 1.1rem; font-weight: bold; letter-spacing: 1px;">ë¬´ë¦¼ íšŒìƒë¡</span>
    <div style="font-size: 0.65rem; margin-top: 10px; opacity: 0.4;">â–¼ ì—´ëŒí•˜ê¸°</div>
  </summary>
  <div style="background-color: #fcfaf5; padding: 50px 40px; color: #3e2f24; line-height: 2.1; cursor: auto;">
    <div style="text-align: center; margin-bottom: 40px;">
      <span style="border-bottom: 1px solid #8d735b; padding-bottom: 5px; font-size: 0.9rem; color: #8d735b; opacity: 0.8;">å›æƒ³ (íšŒìƒ)</span>
    </div>
    {{CONTENT}}
    <div style="margin-top: 60px; text-align: center; opacity: 0.3; font-size: 1.2rem;">â¦</div>
  </div>
</details>`;
            document.getElementById('themeInput').value = sampleTheme;
            autoGenerate();
        }
        
        // {{CONTENT}} í”Œë ˆì´ìŠ¤í™€ë” ì‚½ì…
        function insertContentPlaceholder() {
            const textarea = document.getElementById('themeInput');
            const cursorPos = textarea.selectionStart;
            const textBefore = textarea.value.substring(0, cursorPos);
            const textAfter = textarea.value.substring(cursorPos);
            textarea.value = textBefore + '{{CONTENT}}' + textAfter;
            textarea.focus();
            textarea.setSelectionRange(cursorPos + 11, cursorPos + 11);
            autoGenerate();
        }
        
        // ìƒ‰ìƒ í”¼ì»¤ì™€ í…ìŠ¤íŠ¸ ë™ê¸°í™”
        function updateColorInput(picker, textId) {
            document.getElementById(textId).value = picker.value;
        }
        
        function updateColorPicker(text, pickerId) {
            document.getElementById(pickerId).value = text.value;
        }
        
        // ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œ ì „í™˜
        function switchPreview(mode) {
            currentPreviewMode = mode;
            const containers = ['previewContainer1', 'previewContainer3'];
            const pcBtns = ['pcPreviewBtn1', 'pcPreviewBtn3'];
            const mobileBtns = ['mobilePreviewBtn1', 'mobilePreviewBtn3'];
            
            containers.forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    if (mode === 'mobile') {
                        container.classList.add('mobile');
                    } else {
                        container.classList.remove('mobile');
                    }
                }
            });
            
            pcBtns.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    if (mode === 'pc') {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                }
            });
            
            mobileBtns.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    if (mode === 'mobile') {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                }
            });
        }
        
        // ì»¤ìŠ¤í…€ ì •ê·œì‹ ê·œì¹™ ê´€ë¦¬
        function addRegexRule() {
            const id = Date.now();
            customRegexRules.push({ id, pattern: '', replacement: '' });
            renderRegexRules();
        }
        
        function removeRegexRule(id) {
            customRegexRules = customRegexRules.filter(rule => rule.id !== id);
            renderRegexRules();
            autoGenerate();
        }
        
        function renderRegexRules() {
            const container = document.getElementById('customRegexList');
            container.innerHTML = customRegexRules.map(rule => `
                <div class="regex-item">
                    <input type="text" placeholder="ì •ê·œì‹ íŒ¨í„´ (ì˜ˆ: \\[([^\\]]*)\\])" 
                           value="${rule.pattern}" 
                           onchange="updateRegexRule(${rule.id}, 'pattern', this.value)">
                    <input type="text" placeholder="ì¹˜í™˜ ë‚´ìš© (ì˜ˆ: <strong>$1</strong>)" 
                           value="${rule.replacement}" 
                           onchange="updateRegexRule(${rule.id}, 'replacement', this.value)">
                    <button onclick="removeRegexRule(${rule.id})">ì‚­ì œ</button>
                </div>
            `).join('');
        }
        
        function updateRegexRule(id, field, value) {
            const rule = customRegexRules.find(r => r.id === id);
            if (rule) {
                rule[field] = value;
                autoGenerate();
            }
        }
        
        // HTML ìƒì„± ë©”ì¸ í•¨ìˆ˜
        function generateLog() {
            const theme = document.getElementById('themeInput').value;
            let content = document.getElementById('novelInput').value;
            
            if (!theme.includes('{{CONTENT}}')) {
                return; // ê²½ê³  ì—†ì´ ì¡°ìš©íˆ ë¦¬í„´
            }
            
            if (!content.trim()) {
                return; // ë‚´ìš© ì—†ìœ¼ë©´ ì¡°ìš©íˆ ë¦¬í„´
            }
            
            // ìŠ¤íƒ€ì¼ ê°’ ê°€ì ¸ì˜¤ê¸°
            const dialogColor = document.getElementById('dialogColorText').value;
            const dialogWeight = document.getElementById('dialogWeight').value;
            const italicOpacity = document.getElementById('italicOpacity').value;
            const italicColor = document.getElementById('italicColorText').value;
            const boldColor = document.getElementById('boldColorText').value;
            const letterSpacing = document.getElementById('letterSpacing').value;
            const paragraphMargin = document.getElementById('paragraphMargin').value;
            const fontSize = document.getElementById('fontSize').value;
            const lineHeight = document.getElementById('lineHeight').value;
            const textColor = document.getElementById('textColorText').value;
            
            // 1. êµ¬ë¶„ì„  ì²˜ë¦¬ (---ë¥¼ <hr>ë¡œ)
            content = content.replace(/^---$/gm, '<hr style="border: none; border-top: 1px solid #ddd; margin: 30px 0;">');
            
            // 2. í°ë”°ì˜´í‘œ ëŒ€ì‚¬ ê°•ì¡°
            content = content.replace(/"([^"]*)"/g, 
                `<span style="color: ${dialogColor}; font-weight: ${dialogWeight};">"$1"</span>`);
            
            // 3. ë³¼ë“œ ì²˜ë¦¬ (**í…ìŠ¤íŠ¸**)
            content = content.replace(/\*\*([^\*]+)\*\*/g, 
                `<strong style="color: ${boldColor};">$1</strong>`);
            
            // 4. ì´íƒ¤ë¦­ì²´ ë³€í™˜ (*í…ìŠ¤íŠ¸*)
            content = content.replace(/\*([^\*]+)\*/g, 
                `<i style="opacity: ${italicOpacity}; color: ${italicColor};">$1</i>`);
            
            // 5. ì»¤ìŠ¤í…€ ì •ê·œì‹ ê·œì¹™ ì ìš©
            customRegexRules.forEach(rule => {
                if (rule.pattern && rule.replacement) {
                    try {
                        const regex = new RegExp(rule.pattern, 'g');
                        content = content.replace(regex, rule.replacement);
                    } catch (e) {
                        console.error('ì •ê·œì‹ ì˜¤ë¥˜:', e);
                    }
                }
            });
            
            // 6. ë¬¸ë‹¨ ì²˜ë¦¬
            const lines = content.split('\n');
            const htmlParagraphs = [];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                // <hr> íƒœê·¸ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
                if (line.startsWith('<hr')) {
                    htmlParagraphs.push(line);
                } else if (line !== '') {
                    htmlParagraphs.push(`<p style="margin-bottom: ${paragraphMargin}; letter-spacing: ${letterSpacing}; font-size: ${fontSize}; line-height: ${lineHeight}; color: ${textColor};">${line}</p>`);
                }
            }
            
            const finalContent = htmlParagraphs.join('');
            
            // 7. í…Œë§ˆì™€ ê²°í•©
            const finalHtml = theme.replace('{{CONTENT}}', finalContent);
            
            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('resultCode').textContent = finalHtml;
            
            // ëª¨ë“  ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆì— í‘œì‹œ
            ['previewContainer1', 'previewContainer3'].forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    container.innerHTML = finalHtml;
                }
            });
        }
        
        // í´ë¦½ë³´ë“œ ë³µì‚¬
        function copyToClipboard() {
            const code = document.getElementById('resultCode').textContent;
            
            if (!code || code.includes('ìƒì„±ëœ HTML')) {
                alert('ë¨¼ì € HTMLì„ ìƒì„±í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            navigator.clipboard.writeText(code).then(() => {
                const btn = document.getElementById('copyBtn');
                const originalText = btn.textContent;
                btn.textContent = 'âœ… ë³µì‚¬ì™„ë£Œ!';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + err);
            });
        }
    </script>
</body>
</html>
